<html>

<head>
    <title>Spice Factory Admin </title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- firebase  -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <script src="admin.js"></script>



    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">&times;</a>
        <a href="#">Admin</a>

        <!-- <a href="#">Services</a>
        <a href="#">Clients</a>
        <a href="#">Contact</a> -->
    </div>

    <div id="main">
        <button class="openbtn" onclick="openSidebar()">&#9776; Open Sidebar</button>
        <h1>Admins work</h1>
        <div class="m-4">
            <table class="table">
                <thead>
                    <tr>
                        <th>UserID</th>
                        <th>Customer Name</th>
                        <th>Customer message </th>
                        <th>Date and Time</th>
                        <th>No of peoples</th>
                    </tr>
                </thead>
                <tbody id="Tbody1"></tbody>
                <!-- <tbody>
                    <tr>
                        <td>1</td>
                        <td>Clark</td>
                        <td>Kent</td>
                        <td>clarkkent@mail.com</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Peter</td>
                        <td>Parker</td>
                        <td>peterparker@mail.com</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>John</td>
                        <td>Carter</td>
                        <td>johncarter@mail.com</td>
                    </tr>
                </tbody> -->
            </table>
        </div>
        <script type="module">
            var userid = 0;
            var tbody = document.getElementById('Tbody1');

            function AddItemToTable(cust_name, Cust_msg, date, no_peoples) {
                let trow = document.createElement("trow");
                let td1 = document.createElement('td');
                let td2 = document.createElement('td');
                let td3 = document.createElement('td');
                let td4 = document.createElement('td');
                let td5 = document.createElement('td');

                td1.innerHTML = ++userid;
                td2.innerHTML = cust_name;
                td3.innerHTML = date;
                td4.innerHTML = Cust_msg;
                td5.innerHTML = no_peoples;

                trow.appendChild(td1);
                trow.appendChild(td2);
                trow.appendChild(td3);
                trow.appendChild(td4);
                trow.appendChild(td5);

                tbody.appendChild(trow);
            }

            function AddAllItemsToTable(user1) {
                userid = 0;
                tbody.innerHTML = "";
                user1.forEach(element => {
                    AddItemToTable(element.Customer_name, element.Date_Time, element.Cust_message, element.No_of_peoples)
                });
            }

            import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js'
            import { getDatabase, ref, set, child, onValue, get } from "https://cdnjs.cloudflare.com/ajax/libs/firebase/9.8.3/firebase-database.min.js";

            // TODO: Replace the following with your app's Firebase project configuration
            const firebaseConfig = {
                apiKey: "AIzaSyDfvglCa7eO_65LfxIyOeQel5b2Izdjs9o",
                authDomain: "restaurantsystem-b01d5.firebaseapp.com",
                databaseURL: "https://restaurantsystem-b01d5-default-rtdb.firebaseio.com",
                projectId: "restaurantsystem-b01d5",
                storageBucket: "restaurantsystem-b01d5.appspot.com",
                messagingSenderId: "475408154352",
                appId: "1:475408154352:web:7c5535bb751ccadc5e0c35"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);



            function GetAllDataOnce() {
                const dbRef = ref(getDatabase());
                get(child(dbRef, `users`)).then((snapshot) => {
                    var user = [];
                    snapshot.forEach(childSnapshot => {
                        user.push(childSnapshot.val());
                    });
                    AddAllItemsToTable(user);

                });
            }
            window.onload = GetAllDataOnce;






        </Script>

</body>

</html>